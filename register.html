<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>BBB Auto School | Register</title>

  <meta name="description"
    content="Driving School in Taunton MA helping teens and adults learn driving and go through an affording RMV ceritifed school.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="keywords"
    content="driving, school, taunton, ma, massachusetts, cheap, affordable, fast, quick, license, road, test, rmv">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <link rel="icon" href="./pictures/favicon.ico">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <style>
    .form-group.required .control-label:after {
      color: #d00;
      content: "*";
      margin-left: 8px;
      top: 7px;
      font-family: 'Glyphicons Halflings';
      font-weight: normal;
      font-size: 8px;
    }
  </style>
  <script type="text/javascript" src="https://cdn.emailjs.com/sdk/2.3.2/email.min.js"></script>
  <script type="text/javascript">
    (function () {
      emailjs.init("user_DC0mmH05yrIujnY6imtj7");
    })();
  </script>

  <script type="text/javascript">
    function doEmailSubmit() {
      var packageText = getSelectedPackageForSubmit();
      var template_params = {
        "student_name": document.getElementById('student_name').value == null ? '' : document.getElementById('student_name').value,
        "street_address": document.getElementById('address').value == null ? '' : document.getElementById('address').value,
        "home_phone": document.getElementById('home_phone').value,
        "cell_phone": document.getElementById('student_cell').value,
        "student_email": document.getElementById('student_email').value == null ? '' : document.getElementById('student_email').value,

        "parent_name": document.getElementById('parent_name').value == null ? '' : document.getElementById('parent_name').value,
        "parent_email": document.getElementById('parent_email').value == null ? '' : document.getElementById('parent_email').value,
        "parent_phone": document.getElementById('parent_phone').value == null ? '' : document.getElementById('parent_phone').value,

        "best_time_to_call": document.getElementById('best_time_to_call').value == null ? '' : document.getElementById('best_time_to_call').value,
        "permit": document.getElementById('learners_permit').value == null ? '' : document.getElementById('learners_permit').value,
        "dob": document.getElementById('dob').value,
        "starting_date": document.getElementById('starting_date').value,
        "notes": document.getElementById('notes').value == null ? '' : document.getElementById('notes').value,

        "package": packageText,
        "agreedToPrice": document.getElementById('agreedToPrice').checked,
        "agreed": document.getElementById('agreeToTerms').checked
      }
      var service_id = "default_service";
      var template_id = 'registerformemail';

      var status = emailjs.send(service_id, template_id, template_params);

      alert("Registration Information Saved! If you don't hear back from us in 48 hours, please give us a call!")
      return false;
    }

    function addDashes(item) {
      if (document.getElementById(item).value) {
        var num = document.getElementById(item).value.replace(/-/g, "");

        var parts = [num.slice(0, 3), num.slice(3, 6), num.slice(6, 10)];

        var fNum = "";
        if (parts[2]) { fNum = parts[0] + "-" + parts[1] + "-" + parts[2]; }
        else if (parts[1]) { fNum = parts[0] + "-" + parts[1]; }
        else { fNum = parts[0]; }

        document.getElementById(item).value = fNum
      }
    }

    function getUrlVars() {
      var vars = {};
      var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {
        vars[key] = value;
      });
      return vars;
    }

    function getUrlParam(parameter, defaultvalue) {
      var urlparameter = defaultvalue;
      if (window.location.href.indexOf(parameter) > -1) {
        urlparameter = getUrlVars()[parameter];
      }
      return urlparameter;
    }
    function updatePrivatePrice() {
      var e = document.getElementById("privatePackageHours");
      var hours = e.options[e.selectedIndex].text;
      var priceToUse = 50;

      var finalPrice = priceToUse * hours;

      if (hours == 6) {
        finalPrice = 270;
      }
      if (!(isNaN(finalPrice))) {
        document.getElementById("finalPrice").innerHTML = "$" + finalPrice + ".00";
      } else {
        document.getElementById("finalPrice").innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
      }
    }
    function getPrivatePackage() {
      const deal = `
        <h5>10% off Regular Price for sessions over 6 Hours!</h5>
        <h4>
          <table class="table">
            <tr>
              <td>Private Package</td>
              <td>$50.00 x 
                <select id="privatePackageHours" name="privatePackageHours" onchange="return updatePrivatePrice()">
                  <option value="1" selected="selected">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                </select> 
                hour(s)
              </td>
              <td>
                <p name="finalPrice" id="finalPrice" style="width:200">$50.00</p>
              </td>
          </table>
        </h4>
      `;
      document.getElementById('packageSection').innerHTML = deal;
    }
    function updateDriversPackage() {
      var e = document.getElementById("driversPackage");
      var option = e.options[e.selectedIndex].value;

      if (option == "fullPackage") {
        document.getElementById("finalPrice").innerHTML = "$699.00";
      }
      else if (option == "30Hours") {
        document.getElementById("finalPrice").innerHTML = "$250.00";
      }
      else if (option == "12Hours") {
        document.getElementById("finalPrice").innerHTML = "$540.00";
      }
      else if (option == "6Hours") {
        document.getElementById("finalPrice").innerHTML = "$270.00";
      }
    }
    function getDriversEdPackage() {
      const deal = `
        <h4>
          <table class="table">
            <tr>
              <td>Driver's ED Program </td>
              <td>
                <select id="driversPackage" name="driversPackage" onchange="return updateDriversPackage()">
                  <option value="fullPackage" selected="selected">Full Package</option>
                  <option value="30Hours">30 Hours Classroom Lessons</option>
                  <option value="12Hours">12 Hours Driving Instruction</option>
                  <option value="6Hours">6 Hours Driving Lessons</option>
                </select>
              </td>
              <td>
                <p name="finalPrice" id="finalPrice" style="width:200">$699.00</p>
              </td>
          </table>
        </h4>
      `;
      document.getElementById('packageSection').innerHTML = deal;
    }
    function getRoadTestPackage() {
      const deal = `
        <h4>
          <table class="table">
            <tr>
              <td>
               Road Test Sponsorship
              </td>
              <td>
                <p name="finalPrice" id="finalPrice" style="width:200">$120.00</p>
              </td>
          </table>
        </h4>
      `;
      document.getElementById('packageSection').innerHTML = deal;
    }
    function noPackage() {
      const deal = `
        <h4>
          <table class="table">
            <tr>
              <td>
               No Package Selected
              </td>
              <td>
                <p name="finalPrice" id="finalPrice" style="width:200"></p>
              </td>
          </table>
        </h4>
      `;
      document.getElementById('packageSection').innerHTML = deal;
    }

    function getNonRoadTestTerms() {
      var content = `<label class="control-label"><input onchange="return enableRegisterButton()" type="checkbox" name="agreeToTerms"
            id="agreeToTerms">I have read and agree
          with the <a href="resources/Policies.pdf" target="_blank">Terms
            and Conditions</a>. <span
            style="color: #d00;font-family: 'Glyphicons Halflings'; font-weight: normal;font-size: 8px;">*</span></label>
      `;
      return content;
    }
    function getRoadTestTerms() {
      var content = `
        <br />
        <h4>Terms and Conditions</h4>
        <p>The RMV may cancel the road test schedule due to savers weather, state emergency and any other reasons, BBB Auto School does not have any controls on that, to make sure about your appointment please check with RMV. If RMV cancel appointment, you can make another appointment.</p>
        <p>Road test sponsorship fee does not include RMV Fees.</p>
        <p>Once booked for sponsorship with BBB Auto School no cancellation can be made within 72 hours.</p>
        <p>Student Driver should be on time for road test. if you late more than 15 minutes, will be marked as no show, resulting missed road test and no money will be refunded.</p>
        <label class="control-label"><input onchange="return enableRegisterButton()" type="checkbox" name="agreeToTerms"
            id="agreeToTerms">I have read and agree
          with the Terms
            and Conditions. <span
            style="color: #d00;font-family: 'Glyphicons Halflings'; font-weight: normal;font-size: 8px;">*</span></label>
      
      `;
      return content;

    }

    function getSelectedPackageForSubmit() {
      var optionChosen = getUrlParam('package', 'Empty');
      var output = "";

      if (optionChosen == "privatePackage") {
        var e = document.getElementById("privatePackageHours");
        var hours = e.options[e.selectedIndex].text;
        output = "Private Package - " + hours + " hours"
      }
      else if (optionChosen == "driversEdPackage") {
        var e = document.getElementById("driversPackage");
        var packages = e.options[e.selectedIndex].text;
        output = "Driver's ED Program - " + packages;
      }
      else if (optionChosen == "roadTestPackage") {
        output = "Road Test Sponsorship";
      } else {
        output = "None!";
      }
      return output;
    }
    function getPackageDetails() {
      var package = getUrlParam('package', 'Empty');

      document.getElementById("termsAndConditions").innerHTML = getNonRoadTestTerms();

      if (package == "privatePackage") {
        return getPrivatePackage();
      }
      else if (package == "roadTestPackage") {

        document.getElementById("termsAndConditions").innerHTML = getRoadTestTerms();
        return getRoadTestPackage();
      }
      else if (package == "driversEdPackage") {
        return getDriversEdPackage();
      } else {

        document.getElementById("agreeToTerms").disabled = true;
        return noPackage();
      }

    }

    function enableRegisterButton() {
      if (document.getElementById('agreedToPrice').checked && document.getElementById('agreeToTerms').checked) {
        document.getElementById('register').disabled = false;
      } else {
        document.getElementById('register').disabled = true;
      }
    }
  </script>
</head>

<body onload="return getPackageDetails()">
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="index.html">BBB Auto School</a>
      </div>
      <ul class="nav navbar-nav">
        <li><a href="index.html">Home</a></li>
      </ul>
    </div>
  </nav>
  <div class="container">
    <p class="text-center">
      <img src="pictures/logo.png" style="width: 15%; height: auto"></img>
    </p>
    <h3 class="text-center">Online Registration</h3>
    <h5>Fields marked with an asterisk are required! </h5>
    <form onsubmit="return doEmailSubmit()">
      <table class="table">
        <tbody>
          <tr>
            <th scope="row">
              <label class="control-label" for="student_name">Student Name: <span
                  style="color: #d00;font-family: 'Glyphicons Halflings'; font-weight: normal;font-size: 8px;">*</span></label>
            </th>
            <td><input type="text" class="form-control" id="student_name" placeholder="Enter Your Full Name Here"
                name="name" required="true">
            </td>
          </tr>

          <tr>
            <th scope="row">
              <label class="control-label" for="address">Address</label>
            </th>
            <td>
              <input type="text" class="form-control" id="address" placeholder="Enter Street Address" name="address">
            </td>
          </tr>

          <tr>
            <th scope="row">
              <label class="control-label" for="student_email">Student Email: <span
                  style="color: #d00;font-family: 'Glyphicons Halflings'; font-weight: normal;font-size: 8px;">*</span></label>
            </th>
            <td>
              <input type="email" class="form-control" id="student_email" placeholder="Enter Student Email"
                name="student_email" required="true">
            </td>
          </tr>

          <tr>
            <th scope="row">
              <label class="control-label" for="home_phone">Home Phone:</label>
            </th>
            <td>
              <input type="text" pattern="(\d{3}[\-]\d{3}[\-]\d{4})|(\d{10})" class="form-control" id="home_phone"
                placeholder="000-000-0000" title="Must be in format 000-000-0000 with or without dashes"
                name="home_phone" onkeypress="return addDashes('home_phone')">
            </td>
          </tr>

          <tr>
            <th scope="row">
              <label class="control-label" for="student_cell">Student Cell Phone: <span
                  style="color: #d00;font-family: 'Glyphicons Halflings'; font-weight: normal;font-size: 8px;">*</span></label>
            </th>
            <td>
              <input type="text" placeholder="000-000-0000" class="form-control" id="student_cell"
                pattern="(\d{3}[\-]\d{3}[\-]\d{4})|(\d{10})"
                title="Must be in format 000-000-0000 with or without dashes" name="student_cell" required="true"
                onkeypress="return addDashes('student_cell')">
            </td>
          </tr>

          <tr>
            <th scope="row">
              <label class="control-label" for="parent_name">Parent Name:</label>
            </th>
            <td>
              <input type="text" class="form-control" id="parent_name" placeholder="Enter Parent's Full Name"
                name="parent_name">
            </td>
          </tr>

          <tr>
            <th scope="row">
              <label class="control-label" for="parent_email">Parent Email:</label>
            </th>
            <td>
              <input type="email" class="form-control" id="parent_email" placeholder="Enter Parent's Email"
                name="parent_email">
            </td>
          </tr>

          <tr>
            <th scope="row">
              <label class="control-label" for="parent_phone">Parent's Phone:</label>
            </th>
            <td>
              <input type="text" class="form-control" title="Must be in format 000-000-0000 with or without dashes"
                id="parent_phone" pattern="(\d{3}[\-]\d{3}[\-]\d{4})|(\d{10})" placeholder="000-000-0000"
                name="parent_phone" onkeypress="return addDashes('parent_phone')">

            </td>
          </tr>

          <tr>
            <th scope="row">
              <label class="control-label" for="best_time_to_call">Best Time to Call:</label>
            </th>
            <td>
              <input type="text" class="form-control" id="best_time_to_call" placeholder="Best Time to Call"
                name="best_time_to_call">
            </td>
          </tr>

          <tr>
            <th scope="row">
              <label class="control-label" for="learners_permit">Learner's Permit #:</label>
            </th>
            <td>
              <input type="text" class="form-control" id="learners_permit" placeholder="Enter Learner's Permit #"
                name="learners_permit">
            </td>
          </tr>

          <tr>
            <th scope="row">
              <label class="control-label" for="dob">Date of Birth:</label>
            </th>
            <td>
              <input type="date" class="form-control" id="dob" placeholder="Enter DOB" name="dob">
            </td>
          </tr>


          <tr>
            <th scope="row">
              <label class="control-label" for="starting_date">Starting Date:</label>
            </th>
            <td>
              <input type="date" class="form-control" id="starting_date" placeholder="Starting Date"
                name="starting_date">
            </td>
          </tr>

          <tr>
            <th scope="row">
              <label class="control-label" for="notes">Notes:</label> </th>
            <td>
              <input type="text" class="form-control" id="notes" placeholder="Notes (optional)" name="notes">

            </td>
          </tr>
        </tbody>
      </table>
      <div>
        <h3>Selected Package:</h1>
          <div id="packageSection" name="packageSection">

          </div>
      </div>
      <div class="checkbox" required>
        <label class="control-label"><input onchange="return enableRegisterButton()" type="checkbox"
            name="agreedToPrice" id="agreedToPrice">I have reviewed and
          agree upon the price shown above!<span
            style="color: #d00;font-family: 'Glyphicons Halflings'; font-weight: normal;font-size: 8px;">*</span></label>
      </div>

      <div class="checkbox" required id="termsAndConditions">

      </div>
      <br />
      <button type="submit" id="register" disabled="true" name="register" class="btn btn-default">Register</button>
    </form>
    <p style="color: white">a</p>
    <p style="color: white">a</p>
  </div>


</body>

</html>